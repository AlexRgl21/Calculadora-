// =============================================
// ALGORITMO PRINCIPAL: CalculadoraTodoEnUno
// =============================================
Algoritmo CalculadoraTodoEnUno
    // Declaración de la variable para el menú principal
    Definir opcionPrincipal Como Entero
    
    // Bucle principal: se repite hasta que el usuario elija salir (5)
    Mientras opcionPrincipal <> 5 Hacer
        Limpiar Pantalla  // Limpia la pantalla para mejor presentación
        
        // === MENÚ PRINCIPAL ===
        Escribir "=================================="
        Escribir " MENÚ PRINCIPAL"
        Escribir "=================================="
        Escribir "1) Calculadora Básica (+ - * /)"
        Escribir "2) Calculadora de Áreas"
        Escribir "3) Estadística Básica"
        Escribir "4) Secuencia de Fibonacci"
        Escribir "5) Salir"
        Escribir "=================================="
        Escribir "Seleccione una opción (1-5): "
        Leer opcionPrincipal  // Lee la opción del usuario
        
        // Selecciona la acción según la opción ingresada
        Segun opcionPrincipal Hacer
            1:
                // Llama al subproceso de calculadora básica
                CalculadoraBasica()
            2:
                // Llama al subproceso de cálculo de áreas
                CalculadoraAreas()
            3:
                // Llama al subproceso de estadísticas
                EstadisticaBasica()
            4:
                // Llama al subproceso de Fibonacci
                Fibonacci()
            5:
                // Mensaje de despedida al salir
                Escribir "¡Gracias por usar la aplicación! ¡Hasta luego!"
            De Otro Modo:
                // Manejo de opción inválida
                Escribir "Opción inválida. Intente de nuevo."
                Esperar Tecla  // Pausa para que el usuario vea el error
        FinSegun
    FinMientras
FinAlgoritmo

// =============================================
// SUBPROCESO: Calculadora Básica
// =============================================
SubProceso CalculadoraBasica
    // Variables locales
    Definir opcion Como Entero
    Definir n1, n2, resultado Como Real
    
    // Bucle del menú de calculadora básica
    Mientras opcion <> 5 Hacer
        Escribir ""  // Línea en blanco para espaciado
        Escribir "===== CALCULADORA BÁSICA ====="
        Escribir "1) Sumar ( + )"
        Escribir "2) Restar ( - )"
        Escribir "3) Multiplicar ( * )"
        Escribir "4) Dividir ( / )"
        Escribir "5) Volver al menú principal"
        Escribir "Seleccione una opción (1-5): "
        Leer opcion  // Lee la operación a realizar
        
        // Ejecuta la operación seleccionada
        Segun opcion Hacer
            1:  // Suma
                Escribir "Ingrese el primer número: "
                Leer n1
                Escribir "Ingrese el segundo número: "
                Leer n2
                resultado <- n1 + n2
                Escribir "Resultado: ", resultado
                
            2:  // Resta
                Escribir "Ingrese el primer número: "
                Leer n1
                Escribir "Ingrese el segundo número: "
                Leer n2
                resultado <- n1 - n2
                Escribir "Resultado: ", resultado
                
            3:  // Multiplicación
                Escribir "Ingrese el primer número: "
                Leer n1
                Escribir "Ingrese el segundo número: "
                Leer n2
                resultado <- n1 * n2
                Escribir "Resultado: ", resultado
                
            4:  // División
                Escribir "Ingrese el primer número (dividendo): "
                Leer n1
                Escribir "Ingrese el segundo número (divisor): "
                Leer n2
                // Validación: evitar división por cero
                Si n2 = 0 Entonces
                    Escribir "ERROR: División por cero no permitida."
                Sino
                    resultado <- n1 / n2
                    Escribir "Resultado: ", resultado
                FinSi
                
            5:  // Salir al menú principal
                Escribir "Volviendo al menú principal..."
                
            De Otro Modo:
                // Opción no válida en el submenú
                Escribir "Opción inválida. Ingrese un número entre 1 y 5."
        FinSegun
        
        // Si no se eligió salir, mostrar pausa
        Si opcion <> 5 Entonces
            Escribir ""
            Escribir "Presione ENTER para continuar..."
            Esperar Tecla  // Espera que el usuario presione una tecla
        FinSi
    FinMientras
FinSubProceso

// =============================================
// SUBPROCESO: Calculadora de Áreas
// =============================================
SubProceso CalculadoraAreas
    // Variables locales
    Definir opcion Como Entero
    Definir radio, diametro, area, lado, base, altura, baseM, baseMe Como Real
    Definir tipo Como Cadena
    Definir pii Como Real
    pii <- 3.141592  // Valor aproximado de ?
    
    // Bucle del menú de áreas (repetir hasta elegir 0)
    Repetir
        Limpiar Pantalla
        Escribir "=== CALCULADORA DE ÁREAS ==="
        Escribir "1) Círculo"
        Escribir "2) Cuadrado"
        Escribir "3) Triángulo"
        Escribir "4) Trapecio"
        Escribir "0) Volver al menú principal"
        Escribir ""
        Escribir "Selecciona una opción: "
        Leer opcion
        
        // Procesar opción seleccionada
        Segun opcion Hacer
            1:  // Área del círculo
                Escribir "Círculo seleccionado."
                Escribir "¿Vas a introducir Radio (R) o Diámetro (D)? "
                Leer tipo
                // Entrada por radio
                Si tipo = "R" O tipo = "r" Entonces
                    Escribir "Introduce el radio: "
                    Leer radio
                    diametro <- radio * 2
                    area <- pii * radio * radio
                    Escribir "Radio: ", radio
                    Escribir "Diámetro: ", diametro
                    Escribir "Área: ", area
                Sino
                    // Entrada por diámetro
                    Si tipo = "D" O tipo = "d" Entonces
                        Escribir "Introduce el diámetro: "
                        Leer diametro
                        radio <- diametro / 2
                        area <- pii * radio * radio
                        Escribir "Diámetro: ", diametro
                        Escribir "Radio: ", radio
                        Escribir "Área: ", area
                    Sino
                        // Entrada inválida (ni R ni D)
                        Escribir "Opción inválida. Use R o D."
                    FinSi
                FinSi
                
            2:  // Área del cuadrado
                Escribir "Cuadrado seleccionado."
                Escribir "Introduce el lado: "
                Leer lado
                area <- lado * lado
                Escribir "Área: ", area
                
            3:  // Área del triángulo
                Escribir "Triángulo seleccionado."
                Escribir "Introduce la base: "
                Leer base
                Escribir "Introduce la altura: "
                Leer altura
                area <- (base * altura) / 2
                Escribir "Área: ", area
                
            4:  // Área del trapecio
                Escribir "Trapecio seleccionado."
                Escribir "Introduce la base mayor: "
                Leer baseM
                Escribir "Introduce la base menor: "
                Leer baseMe
                Escribir "Introduce la altura: "
                Leer altura
                area <- ((baseM + baseMe) / 2) * altura
                Escribir "Área: ", area
                
            0:  // Volver al menú principal
                Escribir "Volviendo al menú principal..."
                
            De Otro Modo:
                // Opción no válida
                Escribir "Opción no válida."
        FinSegun
        
        // Si no se eligió salir, pausar
        Si opcion <> 0 Entonces
            Escribir ""
            Escribir "Presiona ENTER para continuar..."
            Esperar Tecla
        FinSi
    Hasta Que opcion = 0  // Repetir hasta que se elija 0
FinSubProceso

// =============================================
// SUBPROCESO: Estadística Básica
// =============================================
SubProceso EstadisticaBasica
    // Variables locales
    Definir n, i, j Como Entero
    Definir numeros Como Real  // Arreglo dinámico
    Definir suma, media, mediana, moda Como Real
    Definir aux, maxFrecuencia, frecuencia Como Entero
    
    // Paso 1: Solicitar cantidad de números
    Escribir "¿Cuántos números deseas ingresar? "
    Leer n
    // Validación básica: n debe ser positivo
    Si n <= 0 Entonces
        Escribir "Error: Debe ingresar al menos un número."
        Esperar Tecla
        // Nota: aquí se sale sin calcular nada (podría mejorarse)
    FinSi
    
    // Crear arreglo con tamaño n
    Dimension numeros[n]
    
    // Paso 2: Ingresar los números
    Para i <- 1 Hasta n Hacer
        Escribir "Ingresa el número ", i, ": "
        Leer numeros[i]
    FinPara
    
    // Paso 3: Calcular suma y media
    suma <- 0
    Para i <- 1 Hasta n Hacer
        suma <- suma + numeros[i]
    FinPara
    media <- suma / n
    
    // Paso 4: Ordenar el arreglo (método burbuja)
    Para i <- 1 Hasta n-1 Hacer
        Para j <- i+1 Hasta n Hacer
            Si numeros[j] < numeros[i] Entonces
                // Intercambiar valores
                aux <- numeros[i]
                numeros[i] <- numeros[j]
                numeros[j] <- aux
            FinSi
        FinPara
    FinPara
    
    // Paso 5: Calcular mediana
    Si n % 2 = 0 Entonces
        // Caso par: promedio de los dos centrales
        mediana <- (numeros[n/2] + numeros[n/2 + 1]) / 2
    Sino
        // Caso impar: valor central
        mediana <- numeros[(n+1)/2]
    FinSi
    
    // Paso 6: Calcular moda (valor más frecuente)
    maxFrecuencia <- 0
    moda <- numeros[1]  // Valor inicial
    Para i <- 1 Hasta n Hacer
        frecuencia <- 0
        Para j <- 1 Hasta n Hacer
            Si numeros[i] = numeros[j] Entonces
                frecuencia <- frecuencia + 1
            FinSi
        FinPara
        // Actualizar si es más frecuente
        Si frecuencia > maxFrecuencia Entonces
            maxFrecuencia <- frecuencia
            moda <- numeros[i]
        FinSi
    FinPara
    
    // Paso 7: Mostrar resultados
    Escribir ""
    Escribir "=== RESULTADOS ESTADÍSTICOS ==="
    Escribir "Media: ", media
    Escribir "Mediana: ", mediana
    Escribir "Moda: ", moda
    Escribir ""
    Escribir "Presione ENTER para volver..."
    Esperar Tecla
FinSubProceso

// =============================================
// SUBPROCESO: Secuencia de Fibonacci
// =============================================
SubProceso Fibonacci
    // Variables locales
    Definir inicio, n, contador Como Entero
    Definir a, b, c Como Entero  // Términos de la secuencia
    
    // Paso 1: Ingresar número inicial
    Escribir "Ingresa el número inicial (debe ser >= 0): "
    Leer inicio
    Si inicio < 0 Entonces
        Escribir "Error: El número inicial debe ser no negativo."
        Esperar Tecla
        // Sale sin generar (podría mejorarse)
    FinSi
    
    // Paso 2: Ingresar cantidad de términos
    Escribir "¿Cuántos términos deseas generar? "
    Leer n
    Si n <= 0 Entonces
        Escribir "Error: Debe generar al menos un término."
        Esperar Tecla
        // Sale sin generar
    FinSi
    
    // Paso 3: Ajustar a y b para empezar en 'inicio'
    a <- 0
    b <- 1
    // Avanzar hasta llegar al número inicial
    Mientras a < inicio Hacer
        c <- a + b
        a <- b
        b <- c
    FinMientras
    
    // Paso 4: Generar y mostrar la secuencia
    contador <- 0
    Escribir ""
    Escribir "=== SUCESIÓN DE FIBONACCI ==="
    Mientras contador < n Hacer
        Escribir a  // Mostrar término actual
        c <- a + b
        a <- b
        b <- c
        contador <- contador + 1
    FinMientras
    
    // Paso 5: Pausa final
    Escribir ""
    Escribir "Presione ENTER para volver..."
    Esperar Tecla
FinSubProceso